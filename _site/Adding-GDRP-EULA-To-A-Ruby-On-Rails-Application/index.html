<!DOCTYPE html>
<html class="no-js">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Jesse Waites | Implementing a GDPR EULA in a Ruby on Rails Application</title>
    <meta name="description" content="As almost everyone has by now heard, the EU has passed some new consumer privacylaws that go into effect later this week. There are a lot of new technical ra...">

    <link rel="stylesheet" href="/css/main.css">

    <link rel="canonical" href="/Adding-GDRP-EULA-To-A-Ruby-On-Rails-Application/">
    <link rel="alternate" type="application/rss+xml" title="Jesse Waites" href="http://localhost:4000/feed.xml" />
    <link rel="apple-touch-icon" href="http://localhost:4000/img/apple-touch-icon.png">
    <link rel="shortcut icon" type="image/ico" href="/favicon.ico" />
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-50943467-2', 'auto');
      ga('send', 'pageview');
    </script>
    <script src="//cdn.rawgit.com/namuol/cheet.js/master/cheet.min.js"
        type="text/javascript"></script>
        <script>cheet('1 u p', function () {
          var audio = new Audio('/1up.mp3');
audio.play();
  alert('You got an extra life! üçÑ ');
});</script>

<!-- Start of Async Drift Code -->
<script>
!function() {
var t;
if (t = window.driftt = window.drift = window.driftt || [], !t.init) return t.invoked ? void (window.console && console.error && console.error("Drift snippet included twice.")) : (t.invoked = !0,
t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ],
t.factory = function(e) {
return function() {
  var n;
  return n = Array.prototype.slice.call(arguments), n.unshift(e), t.push(n), t;
};
}, t.methods.forEach(function(e) {
t[e] = t.factory(e);
}), t.load = function(t) {
var e, n, o, i;
e = 3e5, i = Math.ceil(new Date() / e) * e, o = document.createElement("script"),
o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + i + "/" + t + ".js",
n = document.getElementsByTagName("script")[0], n.parentNode.insertBefore(o, n);
});
}();
drift.SNIPPET_VERSION = '0.3.1';
drift.load('6gyg5xtt693v');
</script>
<!-- End of Async Drift Code -->


    <!--[if lt IE 9]>
        <script src="/js/vendor/html5shiv.min.js"></script>
    <![endif]-->

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@jessewaites">
    <meta name="twitter:creator" content="@jessewaites">
    <!-- <meta property="og:image" content="http://localhost:4000/img/twitter_card2.png" />
    <meta name="twitter:image:src" content="http://localhost:4000/img/twitter_card2.png"> -->
    <meta content="Jesse Waites" property="og:site_name">

    
      <meta name="twitter:title" content="Implementing a GDPR EULA in a Ruby on Rails Application">
      <meta content="Implementing a GDPR EULA in a Ruby on Rails Application" property="og:title">
      <meta content="article" property="og:type">
    

    
      <meta name="twitter:description" content="Jesse Waites - Boston based Rails / React Developer.">
      <meta content="Jesse Waites - Boston based Rails / React Developer." property="og:description">
    

    
      <meta name="twitter:url" content="http://localhost:4000/Adding-GDRP-EULA-To-A-Ruby-On-Rails-Application/">
      <meta content="http://localhost:4000/Adding-GDRP-EULA-To-A-Ruby-On-Rails-Application/" property="og:url">
    

    
      <meta content="2018-05-23T12:50:28-04:00" property="article:published_time">
    

    
      <meta name="twitter:image:src" content="http://localhost:4000/img/GDPR.jpg">
      <meta property="og:image" content="http://localhost:4000/img/GDPR.jpg">
    


    
      
      <meta content="coding" property="article:section">
      
    

    
      
    
    </head>


  <body class="">

    <header class="hero-image" style="background-image: url(/img/GDPR.jpg);">
  <span class="menu-trigger">
  <div id="nav-icon1">
    <span></span>
    <span></span>
    <span></span>
  </div>
</span>

    <!-- if the user has javascript disabled they can still use the menu -->
<noscript>
    <div class="no-js-menu">
        <ul>
            
                <li><i class="fa fa-home"></i><a href="/">Home</a></li>
            
                <li><i class="fa fa-user"></i><a href="/author/jesse">About Jesse Waites</a></li>
            
                <li><i class="fa "></i><a href="/"></a></li>
            
                <li><i class="fa fa-file-text"></i><a href="https://drive.google.com/file/d/0B78faj-_ufT8TEpkZ3JRSmp0WFU/view?usp=sharing">My Resume</a></li>
            
                <li><i class="fa fa-github"></i><a href="https://www.github.com/piratebroadcast">GitHub</a></li>
            
                <li><i class="fa fa-linkedin"></i><a href="https://www.linkedin.com/in/jessewaites">LinkedIn</a></li>
            
                <li><i class="fa fa-twitter"></i><a href="https://www.twitter.com/jessewaites">Twitter</a></li>
            
                <li><i class="fa fa-facebook"></i><a href="http://www.facebook.com/railsdevelopers">Facebook</a></li>
            
                <li><i class="fa fa-instagram"></i><a href="https://www.linkedin.com/in/jessewaites">Instagram</a></li>
            
                <li><i class="fa fa-rocket"></i><a href="mailto: Hi@JesseWaites.com">Email</a></li>
            
                <li><i class="fa fa-book"></i><a href="http://www.amazon.com/Secrets-Of-My-App-Success-ebook/dp/B004Q9U18C">My Book on Amazon</a></li>
            
                <li><i class="fa fa-apple"></i><a href="https://itunes.apple.com/us/book/the-secrets-of-my-app-success/id424978524?mt=11">My Book on iTunes</a></li>
            
        </ul>
    </div>
</noscript>
<!-- end no script -->

    <div id="menu-target">
    <ul>
        
            <li><i class="fa fa-home"></i><a href="/">Home</a></li>
        
            <li><i class="fa fa-user"></i><a href="/author/jesse">About Jesse Waites</a></li>
        
            <li><i class="fa "></i><a href="/"></a></li>
        
            <li><i class="fa fa-file-text"></i><a href="https://drive.google.com/file/d/0B78faj-_ufT8TEpkZ3JRSmp0WFU/view?usp=sharing">My Resume</a></li>
        
            <li><i class="fa fa-github"></i><a href="https://www.github.com/piratebroadcast">GitHub</a></li>
        
            <li><i class="fa fa-linkedin"></i><a href="https://www.linkedin.com/in/jessewaites">LinkedIn</a></li>
        
            <li><i class="fa fa-twitter"></i><a href="https://www.twitter.com/jessewaites">Twitter</a></li>
        
            <li><i class="fa fa-facebook"></i><a href="http://www.facebook.com/railsdevelopers">Facebook</a></li>
        
            <li><i class="fa fa-instagram"></i><a href="https://www.linkedin.com/in/jessewaites">Instagram</a></li>
        
            <li><i class="fa fa-rocket"></i><a href="mailto: Hi@JesseWaites.com">Email</a></li>
        
            <li><i class="fa fa-book"></i><a href="http://www.amazon.com/Secrets-Of-My-App-Success-ebook/dp/B004Q9U18C">My Book on Amazon</a></li>
        
            <li><i class="fa fa-apple"></i><a href="https://itunes.apple.com/us/book/the-secrets-of-my-app-success/id424978524?mt=11">My Book on iTunes</a></li>
        
    </ul>
</div>

    <!-- <div id="avatar" style="float: right;"></div> -->

</header>



<main class="container">
    <!-- <div class="ribbon"><span>For Hire!</span></div> -->

    <div class="row">



        <div class="col-xs-12 single-content">

            <p class="meta">

                <a href="/author/jesse">Jesse</a> in <a href='/category/coding'>Coding</a> <i class="link-spacer"></i> <i class="fa fa-bookmark"></i> 4 minutes
            </p>

            <h1>Implementing a GDPR EULA in a Ruby on Rails Application</h1>

            <p>As almost everyone has by now heard, the EU has passed some new consumer privacy
laws that go into effect later this week. There are a lot of new technical ramifications
of this, but this blog post specifically covers having existing and new users accept
our new GDPR End User Licence Agreement.</p>

<p>When building a new feature, I like to think backwards from the end result of what
we want: At the end of the day, we need all users to accept the new terms. That means we need to display these new terms. If the users don‚Äôt agree, let‚Äôs assume they will no longer be able to use our service.</p>

<p>I solved this by adding an uncloseable Popup modal on our logged-in homepage. You can make a bootstrap modal unable to be closed with:</p>

<p>$(‚Äò#myModal‚Äô).modal({backdrop: ‚Äòstatic‚Äô, keyboard: false}) )</p>

<p>Ok, so users are now locked out of the rest of the application and are forced to make a choice in the modal. So far, so good. The text of the new GDPR EULA is within the modal, as are two buttons: Accept, or Log Out. If they click ‚ÄúLog Out‚Äù, I sent them to the regular Devise ‚ÄúLog Out‚Äù path. So what happens if they click ‚ÄúAccept‚Äù?</p>

<p>I added a column to our Users table called accepted_gdpr_eula_at that accepts Datetime, and ran the migration. Next, I created a new Controller in the Rails Application called GrprEulaController, and added an action called ‚Äúaccept_gdpr_eula!‚Äù. Then I added my route in the routes.rb file. (Bonus points for making this a proper RESTful action, when I refactor this I will do so then‚Äì the rest of our app is built in a similar way to this, so it is actually more consistent with everyone else‚Äôs work to name it this way. Don‚Äôt @ me.)</p>

<p>The user clicks the ‚ÄúAccept‚Äù button, and the method in the controller updates the current_users gdpr_accepted_at column to Time.now, then redirects them to the home path.</p>

<p>I also added some logic to the Popup Modal - if the current_users gdpr_accepted_at column is nil, show the modal. If it is not nil, don‚Äôt show the modal (Since logically it means they have already seen and accepted it.)</p>

<p>We can now determine who has and has not accepted our new terms, and have restricted the ability of users who have not accepted the new terms from using our web application. Yes it could be argued that we could have built an entire EULA management system, but implementing it this way has solved the business goal in a reasonable amount of time. For what it‚Äôs worth, I wrote this on my lunchbreak because I thought it might be helpful to other developers currently working on the same issue, so don‚Äôt read too much into any of this or feel you need to break it apart. Have a great Memorial Day Weekend!</p>


        </div><!-- main-content/col -->
    </div> <!--/row -->

</main> <!-- /container -->

<footer class="single">
    <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-2">
            <img src="/img/jesse.jpg" class="user-icon " alt="user-image">
        </div>
        <div class="col-xs-12 col-sm-6">
            <div class="category-list">
                <p>Published <span>May 23, 2018</span></p>
                <p><a href="/author/jesse">Jesse</a> in <a href='/category/coding'>Coding</a></p>

                <div class="other-catergories">
                    <h3>Also found in</h3>

                    <ul>
                        
                        <li>
                            <a href='/category/coding'>Coding</a>
                            
                        </li>
                        
                    </ul>
                </div>

            </div>
        </div><!-- end col -->
        <div class="col-xs-12 col-sm-4">
            <div class="social">
                <p>Share this article</a>
                <div class="social-links">
                    <a class="social-icon" href="#" data-platform="twitter" data-message="" data-url="http://localhost:4000/Adding-GDRP-EULA-To-A-Ruby-On-Rails-Application/"><i class="fa fa-twitter"></i></a>

                    <a class="social-icon" href="#" data-platform="facebook" data-message="" data-url="http://localhost:4000/Adding-GDRP-EULA-To-A-Ruby-On-Rails-Application/"><i class="fa fa-facebook-official"></i></a>
                    <a class="social-icon" data-platform="mail"  href="mailto:jesse.waites@gmail.com?body=http://localhost:4000/Adding-GDRP-EULA-To-A-Ruby-On-Rails-Application/"><i class="fa fa-envelope"></i></a>
                </div>
            </div>
        </div>
    </div><!-- end row -->
</div>

    
</footer>


    <script src='/js/vendor/modernizr.custom.32229-2.8-respondjs-1-4-2.js'></script>
    <script src="/js/vendor/jquery-1.11.2.min.js"></script>
    <script src='/js/vendor/jquery.jpanelmenu.min.js'></script>
    <script type='application/javascript' src='/js/vendor/fastclick.min.js'></script>
    
    <script src=' /js/main.js'></script>
  </body>

</html>
